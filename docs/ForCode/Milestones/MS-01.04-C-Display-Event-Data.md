# Milestone MS-01.04-C: Display Event Data in UI

## Framework: C-R-A-F-T

### Context
Our database now contains sample data for venues and events. The map shows the stadium, but users have no way to see what matches are happening there. We need to fetch this data from our database and display it in a simple, clean list next to the map.

### Resources
-   **Technology**: Next.js (Server Components), Prisma Client, Tailwind CSS.
-   **Data**: The event and venue data seeded in the previous milestone.

### Art Style
-   **UI**: A clean, minimalist sidebar or panel that overlays the map on one side (e.g., the left side).
-   **Layout**: The list should be vertically scrollable if the content overflows. Each item in the list should be clearly delineated.
-   **Typography**: Clear, legible fonts. Use different font weights or sizes to distinguish between the event name, description, and time.

### Theme
The theme is "at-a-glance information." A user should be able to quickly scan the list of upcoming events without being overwhelmed. The presentation should be simple and prioritize readability.

### Form
-   Data will be fetched on the server-side directly within the main page component (`src/app/(main)/page.tsx`).
-   A new `EventList.tsx` component will be created to receive the event data as a prop and render the list.
-   A new `EventCard.tsx` component will be created to render the details of a single event.

---

## Learning Outcomes

-   **Outcome 1**: Learn the modern Next.js pattern for fetching data directly in Server Components using Prisma Client.
-   **Outcome 2**: Understand how to pass data from a server-side parent component to a client-side or server-side child component via props.
-   **Outcome 3**: Gain experience in building a common UI pattern: a list of data cards fetched from a database.

---

## Context from Source Docs

**Business Rationale (PRD)**: To allow users to "Browse FIFA match schedules and event listings." This is a core feature of the application.
**WBS Alignment**: Phase 3 -> Task 3.1 & 3.5. This milestone combines frontend display with the event data backend.
**Dependencies**: MS-01.04-B (Seed Database).
**Files to Create/Modify**:
-   `src/components/EventList.tsx` (new file)
-   `src/components/EventCard.tsx` (new file)
-   `src/app/(main)/page.tsx`

**Acceptance Criteria**:
-   A list of upcoming matches appears in a panel on the side of the map.
-   Each item in the list displays the event name, description, and start time.
-   The data is fetched from the local SQLite database.
-   The list is styled professionally and is easy to read.

---

## Guardrails

-   **Data Fetching**: Data **must** be fetched on the server within the `page.tsx` file. Do not fetch event data on the client side for this component.
-   **Code Quality**: The UI for the list and its items **must** be broken down into the `EventList` and `EventCard` components to maintain separation of concerns.
-   **UX**: The event list **must not** cover the entire map. It should overlay the map as a sidebar. The list should be vertically scrollable if needed.

---

## Implementation Checklist

-   [ ] **Task 1**: Create the `EventCard` component.
    -   **Action**: Create a new file at `src/components/EventCard.tsx`. Add the following code.
    ```tsx
    import { Event } from '@prisma/client';

    type EventCardProps = {
      event: Event;
    };

    const EventCard = ({ event }: EventCardProps) => {
      return (
        <div className="bg-white/80 backdrop-blur-sm p-4 rounded-lg shadow-md border border-gray-200">
          <h3 className="font-bold text-lg text-gray-800">{event.name}</h3>
          <p className="text-gray-600 text-sm mt-1">{event.description}</p>
          <p className="text-right text-xs text-gray-500 mt-2">
            {new Date(event.startTime).toLocaleString()}
          </p>
        </div>
      );
    };

    export default EventCard;
    ```
    -   **Acceptance**: The `EventCard.tsx` file is created.
-   [ ] **Task 2**: Create the `EventList` component.
    -   **Action**: Create a new file at `src/components/EventList.tsx`. Add the following code.
    ```tsx
    import { Event } from '@prisma/client';
    import EventCard from './EventCard';

    type EventListProps = {
      events: Event[];
    };

    const EventList = ({ events }: EventListProps) => {
      return (
        <div className="absolute top-4 left-4 w-full max-w-sm h-[calc(100vh-2rem)] overflow-y-auto space-y-4 p-1">
          <h2 className="text-2xl font-bold text-gray-900 px-3">Upcoming Events</h2>
          {events.map((event) => (
            <EventCard key={event.id} event={event} />
          ))}
        </div>
      );
    };

    export default EventList;
    ```
    -   **Acceptance**: The `EventList.tsx` file is created.
-   [ ] **Task 3**: Fetch data and render the list on the main page.
    -   **Action**: Open `src/app/(main)/page.tsx` and modify it to fetch data and render the `EventList`.
    ```tsx
    import { PrismaClient } from '@prisma/client';
    import MapView from '@/components/MapView';
    import EventList from '@/components/EventList';

    const prisma = new PrismaClient();

    async function getEvents() {
      const events = await prisma.event.findMany({
        orderBy: {
          startTime: 'asc',
        },
      });
      return events;
    }

    export default async function Home() {
      const events = await getEvents();

      return (
        <main className="h-screen w-screen relative">
          <MapView />
          <EventList events={events} />
        </main>
      );
    }
    ```
    -   **Acceptance**: The main page is updated to be an async Server Component, fetches events using Prisma, and passes them to the `EventList` component.

---

## Testing Requirements

-   [ ] **Manual Verification**:
    1.  Run `pnpm dev`.
    2.  Open the application in a browser.
    3.  **Confirm**: A semi-transparent sidebar or panel appears on the left side of the map.
    4.  **Confirm**: The sidebar contains two event cards, one for each of the seeded matches.
    5.  **Confirm**: Each card correctly displays the event's name, description, and formatted start time.
    6.  **Confirm**: The page loads without any errors in the terminal or the browser console.

---

## Success Criteria

This milestone is complete when:
1.  Event data from the database is successfully fetched on the server and displayed on the page.
2.  The UI consists of a clean, readable list of events presented in styled cards.
3.  The implementation follows the component structure (`EventList`, `EventCard`).
4.  All acceptance criteria are met and manual verification passes.
